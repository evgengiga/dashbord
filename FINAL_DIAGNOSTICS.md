# üîç –§–∏–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è .htaccess

## –ü–æ—à–∞–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ Docker

**–í–æ–π–¥–∏ –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**

```bash
ssh localhost -p222
cd ~/dashboard.headcorn.pro/backend

# –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep uvicorn | grep -v grep

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
tail -20 backend.log

# –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–Ω—É—Ç—Ä–∏ Docker
curl http://127.0.0.1:8002/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON —Å `{"status": "healthy"}` –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–π –æ—Ç–≤–µ—Ç.

---

### –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–í—ã–π–¥–∏ –∏–∑ Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
exit
```

**–ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç
ss -tuln | grep 8002

# –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl http://127.0.0.1:8002/api/health
curl http://localhost:8002/api/health
```

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**, –∑–Ω–∞—á–∏—Ç backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –ø–æ—Ä—Ç–∞ –∏–∑ Docker).

---

### –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä—å .htaccess

**–ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
cd ~/dashboard.headcorn.pro/public_html
cat .htaccess
```

**–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–∞–º:**
```apache
RewriteRule ^api/(.*)$ http://127.0.0.1:8002/api/$1 [P,L]
```

**–ò–ª–∏:**
```apache
RewriteRule ^api/(.*)$ http://localhost:8002/api/$1 [P,L]
```

---

### –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Apache

**–ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ü–æ–ø—Ä–æ–±—É–π –Ω–∞–π—Ç–∏ –ª–æ–≥–∏ Apache
tail -50 /var/log/apache2/error.log 2>/dev/null
# –ò–ª–∏
tail -50 /var/log/httpd/error_log 2>/dev/null
# –ò–ª–∏
tail -50 /home/v/victoruk/logs/error.log 2>/dev/null
```

**–°–º–æ—Ç—Ä–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è.**

---

### –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä (Network tab)

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
1. –û—Ç–∫—Ä–æ–π Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Network
3. –ü–æ–ø—Ä–æ–±—É–π –≤–æ–π—Ç–∏
4. –ù–∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å –∫ `/api/auth/login`
5. –ü–æ—Å–º–æ—Ç—Ä–∏:
   - –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
   - URL –∑–∞–ø—Ä–æ—Å–∞
   - Response (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–ï—Å–ª–∏ `curl http://127.0.0.1:8002/api/health` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:**

Backend –∑–∞–ø—É—â–µ–Ω –≤–Ω—É—Ç—Ä–∏ Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–æ –ø–æ—Ä—Ç –Ω–µ –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞—Ä—É–∂—É. –ù—É–∂–Ω–æ –ª–∏–±–æ:
- –ó–∞–ø—É—Å—Ç–∏—Ç—å backend –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ –≤ Docker)
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –∏–∑ Docker

**–ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—É—Å—Ç–∏—Ç—å backend –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–ù–ï –≤ Docker)
cd ~/dashboard.headcorn.pro/backend

# –ü—Ä–æ–≤–µ—Ä—å, –µ—Å—Ç—å –ª–∏ —Ä–∞–±–æ—á–∏–π Python
python3 --version 2>&1

# –ï—Å–ª–∏ –µ—Å—Ç—å, —Å–æ–∑–¥–∞–π venv –∏ –∑–∞–ø—É—Å—Ç–∏
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# –°–æ–∑–¥–∞–π .env
cat > .env << EOF
DB_HOST=pg4.sweb.ru
DB_PORT=5433
DB_USER=headcorne_test
DB_PASSWORD=Ss8SRGP5TH3W6J@L
DB_NAME=headcorne_test
PLANFIX_API_URL=https://megamindru.planfix.ru/rest/
PLANFIX_API_TOKEN=3325457cab2f1a9b69b3c9191eeadc82
SECRET_KEY=super-secret-key-change-in-production-min-32-characters-long
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440
APP_NAME=Dashboard Service
DEBUG=False
CORS_ORIGINS=https://dashboard.headcorn.pro
EOF

# –ó–∞–ø—É—Å—Ç–∏
nohup uvicorn app.main:app --host 0.0.0.0 --port 8002 > backend.log 2>&1 &
```

---

### –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–±–ª–µ–º–∞ —Å mod_rewrite –∏–ª–∏ mod_proxy

**–ü—Ä–æ–≤–µ—Ä—å, –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ –º–æ–¥—É–ª–∏ Apache:**

```bash
# –ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
apache2ctl -M 2>/dev/null | grep -E "(rewrite|proxy)"
# –ò–ª–∏
httpd -M 2>/dev/null | grep -E "(rewrite|proxy)"
```

**–ï—Å–ª–∏ –º–æ–¥—É–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã, –Ω—É–∂–Ω–æ –∏—Ö –≤–∫–ª—é—á–∏—Ç—å (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–æ–º–æ—â—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Beget).**

---

### –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–æ–ø—Ä–æ–±—É–π –∏–∑–º–µ–Ω–∏—Ç—å .htaccess –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ProxyPass:**

```apache
<IfModule mod_proxy.c>
    ProxyPass /api http://127.0.0.1:8002/api
    ProxyPassReverse /api http://127.0.0.1:8002/api
</IfModule>
```

**–í–º–µ—Å—Ç–æ RewriteRule.**

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–í—ã–ø–æ–ª–Ω–∏ –®–ê–ì 1 –∏ –®–ê–ì 2** - –ø—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å backend
2. **–ü—Ä–∏—à–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
3. **–ü—Ä–æ–≤–µ—Ä—å Network tab –≤ –±—Ä–∞—É–∑–µ—Ä–µ** - –ø–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –∏ —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–º–æ–≥—É —Ç–æ—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å, –≤ —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞.




